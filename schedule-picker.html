<template name="schedulePicker">
  <div class="schedulePicker {{wrapperClass}}">
    <div class="{{inputWrapperClass}}">
      <select name="shortcut" class="{{inputClass}}">
        {{#each scheduleShortcuts}}
          <optgroup label="{{label}}">
            {{#each options}}
              <option value="{{value}}" selected="{{selectedShortcut}}">
                {{label}}
              </option>
            {{/each}}
          </optgroup>
        {{/each}}
      </select>
    </div>
    <div class="{{inputWrapperClass}}">
      <select name="period" class="{{inputClass}}">
        {{#each scheduleKinds}}
          <option value="{{value}}" selected="{{selectedPeriod}}">
            {{label}}
          </option>
        {{/each}}
      </select>
    </div>
  </div>
  <div class="scheduleOptions {{wrapperClass}}">
    {{#each scheduleOptions}}
      <div class="{{../inputWrapperClass}}">
        <select class="{{../inputClass}}">
          {{#each options}}
            <option value="{{value}}" selected="{{selected}}">
              {{label}}
            </option>
          {{/each}}
        </select>        
      </div>

    {{/each}}
  </div>
  <div class="scheduleInstances {{wrapperClass}}">
    {{#each scheduleInstances}}
      <div class="scheduleInstance">
        {{#each instanceOptions}}
          <div class="{{../../inputWrapperClass}}">
            <select class="{{../../inputClass}}">
              {{#each options}}
                <option value="{{value}}" selected="{{selected}}">
                  {{label}}
                </option>
              {{/each}}
            </select>            
          </div>
        {{/each}}
      </div>
    {{/each}}
  </div>
  <input name="{{name}}" type="hidden" value="{{print schedule}}">
  {{#if debug}}<pre>{{print schedule}}</pre>{{/if}}
</template>